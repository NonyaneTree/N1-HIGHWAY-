<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Car Unlock System</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
        }
        .cars-container {
            height: 100vh;
            overflow-y: scroll;
            scroll-snap-type: y mandatory;
        }
        .cars {
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        .car {
            flex: 0 0 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 10px;
            margin: 0;
            background-color: #f0f0f0;
            cursor: pointer;
            scroll-snap-align: start;
            border-bottom: 1px solid #ccc;
        }
        .locked {
            background-color: #ccc;
        }
        .ads-required {
            font-size: 0.8em;
            color: #555;
        }
    </style>
</head>
<body>
    <div class="cars-container">
        <div class="cars">
            <div class="car" onclick="openCar('models/camaro.glb', 'Camaro')">Camaro (Unlocked)</div>
            <div class="car locked" id="car2" onclick="unlockCar(2)">Mercedes G63 (Locked)
                <div class="ads-required" id="ads-car2">Watch 2 ads</div>
                <div id="timer-car2" class="ads-required"></div>
            </div>
            <div class="car locked" id="car3" onclick="unlockCar(3)">Mercedes SLS (Locked)
                <div class="ads-required" id="ads-car3">Watch 3 ads</div>
                <div id="timer-car3" class="ads-required"></div>
            </div>
            <div class="car locked" id="car4" onclick="unlockCar(4)">P911 GT (Locked)
                <div class="ads-required" id="ads-car4">Watch 5 ads</div>
                <div id="timer-car4" class="ads-required"></div>
            </div>
            <div class="car locked" id="car5" onclick="unlockCar(5)">G-Wagen (Locked)
                <div class="ads-required" id="ads-car5">Watch 4 ads</div>
                <div id="timer-car5" class="ads-required"></div>
            </div>
            <div class="car locked" id="car6" onclick="unlockCar(6)">Bugatti Veyron (Locked)
                <div class="ads-required" id="ads-car6">Watch 10 ads</div>
                <div id="timer-car6" class="ads-required"></div>
            </div>
            <div class="car locked" id="car7" onclick="unlockCar(7)">McLaren Senna (Locked)
                <div class="ads-required" id="ads-car7">Watch 9 ads</div>
                <div id="timer-car7" class="ads-required"></div>
            </div>
            <div class="car locked" id="car8" onclick="unlockCar(8)">Audi R8 (Locked)
                <div class="ads-required" id="ads-car8">Watch 7 ads</div>
                <div id="timer-car8" class="ads-required"></div>
            </div>
        </div>
    </div>

    <script>
        // Function to open a car model and redirect to game.html
        function openCar(modelPath, carName) {
            localStorage.setItem('selectedCar', carName);
            // Redirect to game.html
            window.location.href = 'game.html';
        }

        // Function to handle unlocking a car by watching ads
        function unlockCar(carId) {
            const carElement = document.getElementById(`car${carId}`);
            const adsRequiredElement = document.getElementById(`ads-car${carId}`);
            const timerElement = document.getElementById(`timer-car${carId}`);

            if (carElement.classList.contains('locked')) {
                const adsRequired = parseInt(adsRequiredElement.textContent.match(/\d+/)[0], 10);
                let adsWatched = parseInt(localStorage.getItem(`adsWatched-car${carId}`) || 0, 10);

                if (adsWatched < adsRequired) {
                    adsWatched++;
                    localStorage.setItem(`adsWatched-car${carId}`, adsWatched);
                    timerElement.textContent = `Ads watched: ${adsWatched}/${adsRequired}`;

                    // Simulate ad request
                    requestAd().then(() => {
                        if (adsWatched >= adsRequired) {
                            carElement.classList.remove('locked');
                            carElement.onclick = () => openCar(`models/car${carId}.glb`, carElement.textContent.split(' ')[0]);
                            timerElement.textContent = 'Unlocked!';
                        }
                    });
                }
            }
        }

        // Function to simulate an ad request
        function requestAd() {
            return new Promise((resolve) => {
                // Here you would integrate with your ad service, e.g., Google AdSense
                // For now, we'll just simulate a delay
                setTimeout(() => {
                    console.log('Ad watched');
                    resolve();
                }, 2000); // Simulate a 2-second ad
            });
        }
    </script>
</body>
                    </html>
